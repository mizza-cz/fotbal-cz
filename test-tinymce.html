<!DOCTYPE html>
<html lang="cs">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TEST - TinyMCE</title>
    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback" />
    <script>
      document.documentElement.className += " js";
    </script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="/adminwww/lte/plugins/fontawesome-free/css/all.min.css" />
    <!-- Theme style -->
    <link rel="stylesheet" href="/adminwww/lte/dist/css/adminlte.min.css" />
    <!-- jQuery UI -->
    <link rel="stylesheet" href="/adminwww/lte/plugins/jquery-ui/jquery-ui.min.css" />
    <!-- Ionicons -->
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" />
    <!-- Tempusdominus Bootstrap 4 -->
    <link rel="stylesheet" href="/adminwww/lte/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css" />
    <!-- iCheck -->
    <link rel="stylesheet" href="/adminwww/lte/plugins/icheck-bootstrap/icheck-bootstrap.min.css" />
    <!-- JQVMap -->
    <link rel="stylesheet" href="/adminwww/lte/plugins/jqvmap/jqvmap.min.css" />
    <!-- overlayScrollbars -->
    <link rel="stylesheet" href="/adminwww/lte/plugins/overlayScrollbars/css/OverlayScrollbars.min.css" />
    <!-- Daterange picker -->
    <link rel="stylesheet" href="/adminwww/lte/plugins/daterangepicker/daterangepicker.css" />
    <!-- Datetimepicker -->
    <link rel="stylesheet" href="/adminwww/css/datetimepicker-extensions.min.css" />
    <!-- Select2 -->
    <link rel="stylesheet" href="/adminwww/css/select2.min.css" />
    <link rel="stylesheet" href="/adminwww/css/select2-extensions.min.css" />
    <!-- Misc -->
    <link rel="stylesheet" href="/adminwww/css/fixes.min.css" />
  </head>
  <body class="m-5">
    <h1>TinyMCE</h1>
    <form method="post">
      <textarea id="mainEditor">Main editor</textarea>
      <textarea class="mceEditorSimple">Minor editor</textarea>
    </form>
    <div class="d-flex justify-content-end mt-2">
      <button type="button" class="btn btn-primary js-tinymce-getcontent">Uložit</button>
    </div>

    <!-- Photo picker modal -->
    <div class="modal" tabindex="-1" id="photo-picker-wrapper">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Vybrat galerii</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="form-group">
              <label for="frm-formEdit-form-gallery-photo_folder">Složky fotografií</label>
              <input type="hidden" name="gallery[photo_folder]" data-whisper-select="//localhost:3000/admin/whisper/whisper/?type=photoFolder" id="frm-formEdit-form-gallery-photo_folder" value="" />
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Zavřít</button>
          </div>
        </div>
      </div>
    </div>

    <!-- jQuery v3.6.0 -->
    <script src="/adminwww/lte/plugins/jquery/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-migrate-3.4.0.js"></script>
    <!-- jQuery UI 1.11.4 -->
    <script src="/adminwww/lte/plugins/jquery-ui/jquery-ui.min.js"></script>
    <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
    <script>
      $.widget.bridge("uibutton", $.ui.button);
    </script>
    <!-- Bootstrap 4 -->
    <script src="/adminwww/lte/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- AdminLTE plugins -->
    <script src="/adminwww/lte/dist/js/adminlte.min.js"></script>
    <script src="/adminwww/lte/plugins/chart.js/Chart.min.js"></script>
    <script src="/adminwww/lte/plugins/sparklines/sparkline.js"></script>
    <script src="/adminwww/lte/plugins/jqvmap/jquery.vmap.min.js"></script>
    <script src="/adminwww/lte/plugins/jqvmap/maps/jquery.vmap.usa.js"></script>
    <script src="/adminwww/lte/plugins/jquery-knob/jquery.knob.min.js"></script>
    <script src="/adminwww/lte/plugins/moment/moment.min.js"></script>
    <script src="/adminwww/lte/plugins/daterangepicker/daterangepicker.js"></script>
    <script src="/adminwww/lte/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>
    <script src="/adminwww/lte/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
    <!-- Vendors -->
    <script src="/adminwww/js/vendors/select2.min.js"></script>
    <script src="/adminwww/js/vendors/jquery.multiple-select.min.js"></script>
    <script src="/adminwww/js/vendors/nette.ajax.js"></script>
    <script src="/adminwww/js/vendors/netteForms.js"></script>
    <script src="/adminwww/js/vendors/dateInput.js"></script>
    <script src="/adminwww/js/vendors/typeahead.bundle.js"></script>
    <script src="/adminwww/js/vendors/nprogress.js"></script>
    <script src="/adminwww/js/vendors/datetimepicker.js"></script>
    <!-- App -->
    <script src="/adminwww/js/app/copyButton.js"></script>
    <script src="/adminwww/js/app/dateRange.js"></script>
    <script src="/adminwww/js/app/dateS.js"></script>
    <script src="/adminwww/js/app/timeInput.js"></script>
    <script src="/adminwww/js/app/whisper.form.js"></script>
    <script src="/adminwww/js/app/main.js"></script>
    <!-- TinyMCE -->
    <script src="/adminwww/js/vendors/tinymce/tinymce.min.js" referrerpolicy="origin"></script>
    <script>
      const mceEditorSimple = document.querySelector(".mceEditorSimple");
      mceEditorSimple && mceEditorSimple.setAttribute("id", "minorEditor");

      tinymce.init({
        selector: "#mainEditor",
        plugins: "preview searchreplace autolink autosave save directionality visualblocks visualchars fullscreen image link media template codesample table charmap pagebreak nonbreaking anchor advlist lists wordcount help emoticons code",
        language: "cs",
        browser_spellcheck: true,
        contextmenu: false,
        toolbar: "undo redo | bold italic blockquote | blocks | numlist bullist | image gallery media link",
        setup: function (editor) {
          editor.ui.registry.addButton("gallery", {
            // text: "TEST custom button",
            icon: "gallery",
            tooltip: "Vložit galerii",
            onAction: function (_) {
              // editor.insertContent("&nbsp;<strong>It's my button!</strong>&nbsp;");
              // @TODO
              $("#photo-picker-wrapper").modal("show");
              // const modalPhotoPicker = document.getElementById("photo-picker-wrapper");
              // tinymce.activeEditor.windowManager.open({
              //   title: "Dialog Title", // The dialog's title - displayed in the dialog header
              //   body: {
              //     type: "panel", // The root body type - a Panel or TabPanel
              //     items: [
              //       // A list of panel components
              //       {
              //         type: "htmlpanel", // A HTML panel component
              //         html: modalPhotoPicker.innerHTML
              //       }
              //     ]
              //   },
              //   buttons: [
              //     // A list of footer buttons
              //     {
              //       type: "submit",
              //       text: "OK"
              //     }
              //   ]
              // });
            }
          });
        }
        // content_style: "body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"
      });

      const btnGetContent = document.querySelector(".js-tinymce-getcontent");
      btnGetContent.addEventListener("click", () => {
        alert("Obsah k uložení:'\n'" + tinymce.activeEditor.getContent());
      });

      tinymce.init({
        selector: "#minorEditor",
        plugins: "preview searchreplace autolink autosave save directionality visualblocks visualchars fullscreen image link media template codesample table charmap pagebreak nonbreaking anchor advlist lists wordcount help emoticons code",
        language: "cs",
        browser_spellcheck: true,
        contextmenu: false,
        toolbar: "undo redo | bold italic link | blocks",
        height: "300"
      });
    </script>
  </body>
</html>
